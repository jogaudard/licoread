---
title: "licoread"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{licoread}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

# Importing the data
```{r import}
library(licoread)
# this step is not needed if you know where your data are
path <- system.file("extdata/82z", package = "licoread")
# provide the location of your raw files to licoread
data <- licoread(path)

# if your location containes more than one file type, you will have to specify
# which files licoread should read
path <- system.file("extdata/mixed_files", package = "licoread")
gas_df_82z <- licoread(path, file_type = "82z")
```

# Making a fluxible-friendly dataframe
```{r fluxible-81x}
path_81x <- system.file("extdata/81x", package = "licoread")
gas_df_81x <- licoread(path_81x)

co2_df <- licoread_to_fluxible(
  gas_df_81x,
  "CO2",
  datetime_col = "Date"
)
```

With the 82z file type, the name of measured gases is not so intuitive.
You can use the `list_gases()` function to list all the gases present in the dataset.

```{r fluxible-82z}

list_gases(gas_df_82z)

ch4_dry <- licoread_to_fluxible(
  gas_df_82z,
  "LI-7810_CH4_DRY",
  datetime_col = c("LI-8250_DATE", "LI-8250_TIME")
)
```

# Importing data from LI7500 tent setup

The function `licoread::import7500` is tailored to import data files from the LI7500 tent setup described in @halbritterPlantTraitVegetation2024.
Note that if the default values of `plotinfo_names` follows the file naming convention `[location]_[date]_[time of day]_[trial]`.
The function is recursive and will read all the files in the designated folder and subfolders.
It is therefore necessary that the designated folder contains only files to import and were all recorded with the same setup.

The default settings import files from before the update of the LI7500.
```{r li7500-co2fluxtent}
# this step is not needed if you know where your data are
path_co2fluxtent <- system.file("extdata/co2fluxtent", package = "licoread")
data <- import7500(
  path_co2fluxtent,
  plotinfo_names = c("date", "location", "time_of_day", "trial")
)
```

To read files created after the update of the LI7500, set `version = "post2023"`.
```{r li7500-pftc7}
# this step is not needed if you know where your data are
path_pftc7 <- system.file("extdata/pftc7", package = "licoread")
data <- import7500(path_pftc7, version = "post2023", plotinfo = FALSE)
```

In case a comment was written while creating the files (typically inserted on the line above the column names), set `comment = TRUE`.
```{r li7500-pftc5}
# this step is not needed if you know where your data are
path_pftc5 <- system.file("extdata/pftc5", package = "licoread")
data <- import7500(
  path_pftc5, comment = TRUE,
  plotinfo_names = c("site", "block", "date", "plot", "trial")
)
```
